<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes" />
    <title>vcf-enhanced-rich-text-editor demo</title>
    <script dev src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script dev type="module" src="demo.js"></script>
    <custom-style>
      <style is="custom-style" include="demo-pages-shared-styles">
        .centered {
          max-width: 1000px;
        }

        main {
          opacity: 1;
          transition: opacity 0.5s;
        }

        main.hidden {
          opacity: 0;
        }

      </style>
    </custom-style>
    <script>
      window.addEventListener('WebComponentsReady', () => document.querySelector('main').classList.remove('hidden'));
    </script>
  </head>
  <body>
    <main class="vertical-section-container centered hidden">
      <h4><a href="api/#/elements/Vaadin.VcfEnhancedRichTextEditor">API documentation â†—</a></h4>
      <h3>Custom Buttons</h3>
      <demo-snippet>
        <template>
          <vcf-enhanced-rich-text-editor id="custom-buttons">
            <!-- Add custom buttons with HTML -->
            <button id="custom-button" title="Greeting" slot="toolbar">
              <vaadin-icon icon="vaadin:hand"></vaadin-icon>
            </button>
          </vcf-enhanced-rich-text-editor>
          <script>
            window.addEventListener('WebComponentsReady', () => {
              const rte = document.querySelector('#custom-buttons')
              const btn = rte.querySelector('#custom-button');
              const editor = rte._editor;
              const insertText = (text, options) => editor.insertText(editor.getLength(), text, options);

              // Button handlers
              const handler1 = () => insertText('Hello World!');
              const handler2 = () => insertText('+', {bold: true});
              const handler3 = () => {
                editor.formatText(0, editor.getLength(), {
                  'color': '#FFF',
                  'background': '#396',
                  'bold': true
                });
              };

              // Add click listener for button added with HTML
              btn.addEventListener('click', handler1);

              // Add custom buttons with JS
              rte.addCustomButton(
                '',
                'Custom Button 2',
                'vaadin:plus',
                handler2,
                { key: 80, shiftKey: true, shortKey: true, handler: handler2 } // Ctrl (Cmd) + Shft + P
              )
              rte.addCustomButton(
                'Green',
                'Green theme',
                'vaadin:chevron-right',
                handler3,
                { key: 71, altKey: true, shortKey: true, handler: handler3 } // Ctrl (Cmd) + Alt + G
              )
            });
          </script>
        </template>
      </demo-snippet>
      <h3>Placeholders</h3>
      <demo-snippet>
        <template>
          <vcf-enhanced-rich-text-editor id="placeholders" style="height: 300px;"></vcf-enhanced-rich-text-editor>
          <script>
            window.addEventListener('WebComponentsReady', () => {
              const rte = document.querySelector('#placeholders');
              rte.value = '[{"insert":"The company "},{"insert":{"placeholder":{"text":"N-1=Vaadin","format":{"italic":true},"altFormat":{"italic":false,"bold":true, "script": \"sub\"}}}},{"insert":", located in "},{"insert":{"placeholder":{"text":"A-1=Turku, 20540","altFormat":{"link":"https://goo.gl/maps/EX8RTEMUWeEAdkNN8"}}}},{"insert":", was founded in "},{"insert":{"placeholder":{"text":"D-1=01-01-2000"}}},{"insert":"."}]';
              rte.placeholders = [
                {text: 'N-1=Vaadin', format: {italic: true}, altFormat: {italic: false, bold: true, script: 'sub'}},
                {text: 'A-1=Turku, 20540', altFormat: {link: 'https://goo.gl/maps/EX8RTEMUWeEAdkNN8'}},
                'D-1=01-01-2000'
              ];
              rte.placeholderAltAppearancePattern = '(?<=\\=).*$';
              rte.placeholderAltAppearance = true;
            });
          </script>
        </template>
      </demo-snippet>
      <h3>Tab Stops</h3>
      <demo-snippet>
        <template>
          <vcf-enhanced-rich-text-editor style="height: 400px;"></vcf-enhanced-rich-text-editor>
        </template>
      </demo-snippet>
      <h3>Disabled</h3>
      <demo-snippet>
        <template>
          <vcf-enhanced-rich-text-editor style="height: 300px;" disabled></vcf-enhanced-rich-text-editor>
        </template>
      </demo-snippet>
      <h3>Minimum/Maximum Height</h3>
      <demo-snippet>
        <template>
          <style>
            vcf-enhanced-rich-text-editor.height-constraints {
              min-height: 400px;
              max-height: 600px;
            }

          </style>
          <vcf-enhanced-rich-text-editor class="height-constraints"></vcf-enhanced-rich-text-editor>
        </template>
      </demo-snippet>
      <h3>Customizing toolbar</h3>
      <demo-snippet>
        <template>
          <vcf-enhanced-rich-text-editor id="custom-toolbar"></vcf-enhanced-rich-text-editor>
          <script>
            window.addEventListener('WebComponentsReady', () => {
              var rte = document.querySelector('#custom-toolbar');
              rte.toolbarButtons = {undo: false, redo: false, h1: false, h2: false, h3: false, image: false, link: false};
            });
          </script>
        </template>
      </demo-snippet>
      <h3>Custom shortcuts for toolbar standard buttons</h3>
      <demo-snippet>
        <template>
          <vcf-enhanced-rich-text-editor id="custom-toolbar-shortcuts"></vcf-enhanced-rich-text-editor>
          <script>
            window.addEventListener('WebComponentsReady', () => {
              var rte = document.querySelector('#custom-toolbar-shortcuts');
              // shift + f9 for align center 
              rte.addStandardButtonBinding("alignCenter", 120 , false, true, false);
              // shift + P for superscript
              rte.addStandardButtonBinding("superscript", 80 , false, true, false);
              // ctrol + B for header 1
              rte.addStandardButtonBinding("h1", 66 , true, false, false);
              // f9 to load an image
              rte.addStandardButtonBinding("image", 120, false, false, false);
            });
          </script>
        </template>
      </demo-snippet>
    </main>
  </body>
</html>
